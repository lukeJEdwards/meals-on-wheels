(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-26430fc4"],{"06a2":function(e,t,n){"use strict";var i=n("2721"),s=n.n(i);s.a},"0cfc":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"base"},[e.addform?n("AddForm",{attrs:{addedClients:e.clients},on:{"add-client":e.addClient}}):e._e(),e.editform?n("EditForm",{attrs:{client:e.selectedClient}}):e._e(),e.deleteform?n("DeleteForm",{attrs:{client:e.selectedClient,delete:e.deleteClient}}):e._e(),e._m(0),n("Searchbar",{attrs:{"place-holder-text":"Search for clients..."},on:{"search-value":e.FilterHandler}}),n("div",{ref:"info",staticClass:"info"},e._l(e.filterClient,(function(t,i){return n("div",{key:i,staticClass:"row",class:{selected:e.isSelected(i)},on:{click:function(t){return e.selecetClient(i)}}},[n("div",{staticClass:"client"},[n("div",{staticClass:"name"},[e._v(e._s(t.forename))]),n("div",{staticClass:"name"},[e._v(e._s(t.surname))]),n("div",{staticClass:"address"},[e._v(e._s(t.address))])]),n("div",{staticClass:"days"},e._l(t.days,(function(t,i){return n("div",{key:e.clients.length+i,staticClass:"day"},[n("p",[e._v("M: "+e._s(t.main))]),n("p",[e._v("V: "+e._s(t.veg))]),n("p",[e._v("S: "+e._s(t.soup))]),n("p",[e._v("P: "+e._s(t.pudding))])])})),0)])})),0)],1)},s=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"titles"},[n("div",{staticClass:"client"},[n("div",{staticClass:"name"},[e._v("Forename")]),n("div",{staticClass:"name"},[e._v("Surname")]),n("div",{staticClass:"address"},[e._v("Address")])]),n("div",{staticClass:"days"},[n("div",{staticClass:"day"},[e._v("Mon")]),n("div",{staticClass:"day"},[e._v("Tue")]),n("div",{staticClass:"day"},[e._v("Wed")]),n("div",{staticClass:"day"},[e._v("Thu")]),n("div",{staticClass:"day"},[e._v("Fri")])])])}],a=(n("99af"),n("4de4"),n("4160"),n("caad"),n("d3b7"),n("2532"),n("159b"),n("5530")),c=n("2ef0"),r={name:"MealsOnWheelsViewport",components:{Searchbar:function(){return n.e("chunk-5061a671").then(n.bind(null,"e287"))},AddForm:function(){return n.e("chunk-63681fe9").then(n.bind(null,"6f69"))},EditForm:function(){return n.e("chunk-2df1920f").then(n.bind(null,"eb1a"))},DeleteForm:function(){return n.e("chunk-188265f4").then(n.bind(null,"516f"))}},props:{weekId:{type:String,required:!0}},computed:{filterClient:function(){var e=this;return this.clients.filter((function(t){return t.forename.toLowerCase().includes(e.filter.toLowerCase())||t.surname.toLowerCase().includes(e.filter.toLowerCase())}))},editform:function(){var e=this.$store.state.formStatus;return e.active&&"edit"==e.type},deleteform:function(){var e=this.$store.state.formStatus;return e.active&&"delete"==e.type},addform:function(){var e=this.$store.state.formStatus;return e.active&&"add"==e.type}},data:function(){return{filter:"",clients:[],weekInfo:{},cache:{},selectedClient:{}}},watch:{weekId:function(){this.getWeek()}},methods:{FilterHandler:function(e){this.filter=e},getClients:function(){var e=this;this.clients=[],this.weekInfo.data.forEach((function(t){e.$http.get("/clients/".concat(t._id)).then((function(n){n.data&&(n.data.days=t.days,e.clients.push(n.data))})).catch((function(t){e.$toast.open({message:t,type:"error",position:"top"})}))}))},getWeek:function(){var e=this;this.$http.get("/weeks/".concat(this.weekId)).then((function(t){e.weekInfo=t.data,e.cache=Object(c["cloneDeep"])(Object(a["a"])({},e.weekInfo)),e.getClients()})).catch((function(e){return console.log(e)}))},isSelected:function(e){return this.selectedClient==this.clients[e]},selecetClient:function(e){this.selectedClient==this.clients[e]?this.selectedClient={}:this.selectedClient=this.clients[e],this.$emit("client-change",this.selectedClient)},scrollClients:function(){var e=this;setTimeout((function(){e.$refs.info.scrollTop=e.$refs.info.scrollHeight}))},refresh:function(){this.getWeek()},save:function(){var e=this;this.$http.put("/weeks/".concat(this.weekInfo._id),Object(a["a"])({},this.weekInfo)).then((function(t){t.data?(e.weekInfo.hash=t.data.hash,e.selectedClient={},e.$emit("client-change",e.selectedClient),e.$toast.open({message:"Saved!",type:"success",position:"top"}),e.cache=Object(c["cloneDeep"])(Object(a["a"])({},e.weekInfo)),e.refresh()):e.$toast.open({message:t.data,type:"warning",position:"top"})})).catch((function(t){e.$toast.open({message:t,type:"error",position:"top"})}))},deleteClient:function(){var e=this;this.$http.delete("/weeks/".concat(this.weekInfo._id,"/").concat(this.selectedClient._id)).then((function(t){t.data?(e.$toast.open({message:"Client deleted from week",type:"success",position:"top"}),e.refresh(),e.selected={}):e.$toast.open({message:t.data,type:"warning",position:"top"})})).catch((function(t){e.$toast.open({message:t,type:"error",position:"top"})}))},addClient:function(e){for(var t=[],n=0;n<5;n++)t.push({main:0,pudding:0,soup:0,veg:0});e.days=t,this.clients.push(e),this.weekInfo.data.push(e)},checkForchange:function(){return!Object(c["isEqual"])(this.cache,this.weekInfo)}},mounted:function(){this.getWeek(),this.$emit("client-change",this.selectedClient)}},o=r,d=(n("06a2"),n("2877")),l=Object(d["a"])(o,i,s,!1,null,"861d9f82",null);t["default"]=l.exports},2532:function(e,t,n){"use strict";var i=n("23e7"),s=n("5a34"),a=n("1d80"),c=n("ab13");i({target:"String",proto:!0,forced:!c("includes")},{includes:function(e){return!!~String(a(this)).indexOf(s(e),arguments.length>1?arguments[1]:void 0)}})},2721:function(e,t,n){},"44e7":function(e,t,n){var i=n("861d"),s=n("c6b6"),a=n("b622"),c=a("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[c])?!!t:"RegExp"==s(e))}},"5a34":function(e,t,n){var i=n("44e7");e.exports=function(e){if(i(e))throw TypeError("The method doesn't accept regular expressions");return e}},"99af":function(e,t,n){"use strict";var i=n("23e7"),s=n("d039"),a=n("e8b5"),c=n("861d"),r=n("7b0b"),o=n("50c4"),d=n("8418"),l=n("65f0"),u=n("1dde"),f=n("b622"),h=n("2d00"),p=f("isConcatSpreadable"),v=9007199254740991,m="Maximum allowed index exceeded",C=h>=51||!s((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),g=u("concat"),w=function(e){if(!c(e))return!1;var t=e[p];return void 0!==t?!!t:a(e)},_=!C||!g;i({target:"Array",proto:!0,forced:_},{concat:function(e){var t,n,i,s,a,c=r(this),u=l(c,0),f=0;for(t=-1,i=arguments.length;t<i;t++)if(a=-1===t?c:arguments[t],w(a)){if(s=o(a.length),f+s>v)throw TypeError(m);for(n=0;n<s;n++,f++)n in a&&d(u,f,a[n])}else{if(f>=v)throw TypeError(m);d(u,f++,a)}return u.length=f,u}})},ab13:function(e,t,n){var i=n("b622"),s=i("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[s]=!1,"/./"[e](t)}catch(i){}}return!1}},caad:function(e,t,n){"use strict";var i=n("23e7"),s=n("4d64").includes,a=n("44d2"),c=n("ae40"),r=c("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:!r},{includes:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),a("includes")}}]);
//# sourceMappingURL=chunk-26430fc4.874ca9f1.js.map